<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Objects-and-Trees Exercise - Git Basics - Collaborating With Git</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="syllabus.html"><strong aria-hidden="true">2.</strong> Course Syllabus</a></li><li class="chapter-item expanded "><a href="prework-non-devs.html"><strong aria-hidden="true">3.</strong> Prework - For Non-Developers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="prework-non-devs-video-outlines.html"><strong aria-hidden="true">3.1.</strong> Video Transcripts</a></li></ol></li><li class="chapter-item expanded "><a href="prework.html"><strong aria-hidden="true">4.</strong> Prework - For All Students</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="prework/env-setup.html"><strong aria-hidden="true">4.1.</strong> Set Up Git Environment</a></li><li class="chapter-item expanded "><a href="prework/git-graph-install.html"><strong aria-hidden="true">4.2.</strong> Install Git-Graph plugin for VSCode</a></li><li class="chapter-item expanded "><a href="prework/explore-website-code.html"><strong aria-hidden="true">4.3.</strong> Intro to git-basics-starter-repo</a></li><li class="chapter-item expanded "><a href="prework/command-line-exercises.html"><strong aria-hidden="true">4.4.</strong> Git From the Command Line</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="prework/command-line-exercises/three-trees-git-reset.html"><strong aria-hidden="true">4.4.1.</strong> Three Trees and Git Reset</a></li><li class="chapter-item expanded "><a href="prework/command-line-exercises/branching.html"><strong aria-hidden="true">4.4.2.</strong> Branching</a></li><li class="chapter-item expanded "><a href="prework/command-line-exercises/merge-with-no-conflict.html"><strong aria-hidden="true">4.4.3.</strong> Merging Without Conflict</a></li><li class="chapter-item expanded "><a href="prework/command-line-exercises/merge-conflict.html"><strong aria-hidden="true">4.4.4.</strong> Handle Merge Conflict</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="session1.html"><strong aria-hidden="true">5.</strong> Session 1</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="session1/setup-starter-repo.html"><strong aria-hidden="true">5.1.</strong> Set Up Starter Repo</a></li><li class="chapter-item expanded "><a href="session1/simple-collab-workflow.html"><strong aria-hidden="true">5.2.</strong> Simple Collaborative Workflow</a></li><li class="chapter-item expanded "><a href="session1/walkthrough-of-simple-workflow.html"><strong aria-hidden="true">5.3.</strong> Walk-through of Simple Workflow</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="session1/image0.html"><strong aria-hidden="true">5.3.1.</strong> Step 1 - Everybody checkout main</a></li><li class="chapter-item expanded "><a href="session1/image1.html"><strong aria-hidden="true">5.3.2.</strong> Step 2 - Teammate commits work</a></li><li class="chapter-item expanded "><a href="session1/image2.html"><strong aria-hidden="true">5.3.3.</strong> Step 3 - Teammate pushes</a></li><li class="chapter-item expanded "><a href="session1/image3.html"><strong aria-hidden="true">5.3.4.</strong> Step 4 - I make local changes too</a></li><li class="chapter-item expanded "><a href="session1/image4.html"><strong aria-hidden="true">5.3.5.</strong> Step 5.1 - I pull (first 1/2 - fetch)</a></li><li class="chapter-item expanded "><a href="session1/image5.html"><strong aria-hidden="true">5.3.6.</strong> Step 5.2 - I pull (second 1/2 - merge</a></li><li class="chapter-item expanded "><a href="session1/image6.html"><strong aria-hidden="true">5.3.7.</strong> Step 6 - I push main to "origin"</a></li></ol></li><li class="chapter-item expanded "><a href="session1/the-three-objects.html"><strong aria-hidden="true">5.4.</strong> Anatomy of a Git Commit, or, The Three Objects</a></li><li class="chapter-item expanded "><a href="session1/intro-to-git-reset.html"><strong aria-hidden="true">5.5.</strong> Your Local Git repo and The Three Trees - or, "Intro to git reset"</a></li><li class="chapter-item expanded "><a href="session1/resolve-merge-conflict.html"><strong aria-hidden="true">5.6.</strong> Create And Resolve Merge Conflicts - With Basic Workflow</a></li></ol></li><li class="chapter-item expanded "><a href="objects-and-trees-exercise.html" class="active"><strong aria-hidden="true">6.</strong> Objects-and-Trees Exercise</a></li><li class="chapter-item expanded "><a href="session2.html"><strong aria-hidden="true">7.</strong> Session 2</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="session2/github-project-board.html"><strong aria-hidden="true">7.1.</strong> Github Project Boards</a></li><li class="chapter-item expanded "><a href="session2/add-features.html"><strong aria-hidden="true">7.2.</strong> Add Features As a Team</a></li><li class="chapter-item expanded "><a href="session2/git-cherry-pick.html"><strong aria-hidden="true">7.3.</strong> Intro to Git Cherry-Pick</a></li><li class="chapter-item expanded "><a href="session2/git-rebase.html"><strong aria-hidden="true">7.4.</strong> Intro to Git Rebase</a></li></ol></li><li class="chapter-item expanded "><a href="common-git-workflows.html"><strong aria-hidden="true">8.</strong> Common Git Workflows</a></li><li class="chapter-item expanded "><a href="viewing-changes.html"><strong aria-hidden="true">9.</strong> Viewing Changes</a></li><li class="chapter-item expanded "><a href="references.html"><strong aria-hidden="true">10.</strong> References & Further Study</a></li><li class="chapter-item expanded "><a href="cheat-sheet.html"><strong aria-hidden="true">11.</strong> Git Basics Cheat Sheet</a></li><li class="chapter-item expanded "><a href="instructor-notes.html"><strong aria-hidden="true">12.</strong> Instructor Notes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="instructor-notes/session1.html"><strong aria-hidden="true">12.1.</strong> Session 1 </a></li><li class="chapter-item expanded "><a href="instructor-notes/session2.html"><strong aria-hidden="true">12.2.</strong> Session 2 </a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Git Basics - Collaborating With Git</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="exercise---three-objects-three-trees"><a class="header" href="#exercise---three-objects-three-trees">Exercise - Three Objects, Three Trees</a></h1>
<p>(In a 2-day format, this could be assigned as homework).</p>
<p>The goal of this exercise is to solidify two major concepts:</p>
<ul>
<li><strong>The Three Objects</strong> - the git data model</li>
<li><strong>The Three Trees</strong> - managing local changes</li>
</ul>
<p>Work through this entire exercise, poking around in the project repo you started in Session 1.  We'll have already touched on these concepts, but this exercise is designed to test and expand your understanding.</p>
<p>This should help you hit the ground running in Session Two.</p>
<h3 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h3>
<ul>
<li><a href="#set-up-git-aliases">Set up git Aliases</a> - Command-line shortcuts for git</li>
<li><a href="#git-versus-github">Git versus Github</a> - Which operations go with each?</li>
<li><a href="#the-git-data-model---the-three-objects">The Three Objects</a> - Git's Data Model</li>
<li><a href="#the-three-trees">The Three Trees</a> - Managing local changes</li>
</ul>
<p>Review <a href="unix-shell-concepts.html">Basic Unix and Shell</a>.</p>
<h2 id="set-up-git-aliases"><a class="header" href="#set-up-git-aliases">Set up git aliases</a></h2>
<p>This activates cool bash shortcuts for working with git from the bash prompt.</p>
<pre><code>$ cat bin/git-aliases.sh  # See what's there
$ source bin/git-aliases.sh   # Activate aliases in current shell
$ bin/append-aliases-to-profile.sh  # So they'll be part of future shells.
$ adog  # This should work now.
</code></pre>
<h2 id="git-versus-github"><a class="header" href="#git-versus-github">Git versus Github</a></h2>
<p>The git client is a big bag of commands for implementing version control using a local content-addressable DB (aka a repository, or &quot;repo&quot;), as well as efficiently communicating with other, remote repos--a Distributed Version Control System, or DVCS.  Git was written by Linus Torvalds in 2005 for version-controlling the Linux kernel.</p>
<p>In 2008, the social coding platform <a href="https://github.com">github.com</a> came into existence, built around the git client.</p>
<p>When working with the git client and github.com, it's useful to keep in mind which operations/concepts belong to which tool.</p>
<div class="table-wrapper"><table><thead><tr><th><strong>git</strong></th><th><strong>github.com</strong></th></tr></thead><tbody>
<tr><td>repo</td><td>repo</td></tr>
<tr><td>clone</td><td>fork</td></tr>
<tr><td>pull</td><td>pull request</td></tr>
<tr><td>commit,<br> push,<br>merge</td><td>org,<br> team,<br> collaborator,<br> org owner</td></tr>
</tbody></table>
</div>
<h2 id="the-git-data-model---the-three-objects"><a class="header" href="#the-git-data-model---the-three-objects">The Git Data Model - The Three Objects</a></h2>
<h3 id="exploring-the-git-repo---shas-and-objects"><a class="header" href="#exploring-the-git-repo---shas-and-objects">Exploring the git repo - SHAs and objects</a></h3>
<h4 id="the-git-database"><a class="header" href="#the-git-database">The git database</a></h4>
<p>The git DB is &quot;a content-addressable filesystem&quot;.   That is, objects are stored and retrieved using keys (&quot;addresses&quot;) based on their content.  These keys are referred to as &quot;SHAs&quot;.</p>
<p>How is this done?</p>
<p>From your repo's root directory, take a look around using the following as a guide.  NOTE: Your values for git SHA's will be different than what is shown here, since the contents of your objects are different.</p>
<pre><code>$ git rev-parse HEAD
9cd690631f73c4a396e02348744a3a2379f737bc
$ ls .git/objects/9c  # First two characters of HEAD's SHA...
d690631f73c4a396e02348744a3a2379f737bc
</code></pre>
<p>Where did the '9cd69...' string come from?  It's the address of the latest commit, generated by running that content through a SHA-1 hashing algorithm.</p>
<p>How do we know it's a commit?</p>
<pre><code>$ git cat-file -t 9cd69
commit
</code></pre>
<p>What's actually <em>in</em> the commit?  Use &quot;-p&quot; instead of &quot;-t&quot; ...</p>
<pre><code>$ git cat-file -p 9cd69
tree 07018552500e8ebd52c2011c51a9b21a01c11ce4
parent b1c24a12c733be55ab2512fc003a84405bf68126
author Chris Walquist &lt;cwalquist@drw.com&gt; 1615843154 -0500
committer Chris Walquist &lt;cwalquist@drw.com&gt; 1615843154 -0500

ignore _site directory
</code></pre>
<p>Note the format of the commit record, and its fields:  tree, parent, author, committer.  (And after a blank line, the comment).</p>
<p><em>Test your understanding</em>: Are all SHA's commits?  Are all commits SHA's?  Describe the relationship between a SHA and a git repo object.</p>
<h4 id="exercise-commit-hitxt-through-normal-git-commands"><a class="header" href="#exercise-commit-hitxt-through-normal-git-commands">Exercise: Commit hi.txt through &quot;normal git commands&quot;</a></h4>
<p>Create a <code>hi.txt</code> file with a line or two of content in it, and commit it into the repo, using the customary <code>git add</code> and <code>git commit</code> (or their equivalent aliases)</p>
<ul>
<li>What SHA corresponds to the commit?</li>
<li>Can you find that SHA under .git/objects?</li>
<li>Extra credit: Using <code>git cat-file -p</code>, can you trace from the commit SHA, all the way to the blob SHA that contains the actual contents of <code>hi.txt</code>?  HINT: there is a 'tree' SHA between the 'commit' and the 'blob', which is revealed through judicious use of <code>git cat-file -p</code>.  What is the SHA of that blob object?</li>
<li>How would you print the contents of your hi.txt file, using <code>git cat-file -p</code>?</li>
</ul>
<h4 id="while-were-herewhat-else-can-we-see-in-git"><a class="header" href="#while-were-herewhat-else-can-we-see-in-git">While we're here...What else can we see in .git?</a></h4>
<pre><code>$ cd .git
$ ls -l
$ file HEAD
HEAD: ASCII text
$ cat HEAD
ref: refs/heads/main
$ file refs/heads/main
refs/heads/main: ASCII text
$ cat !$  # BANG-dollar!  bash shorthand for &quot;last argument of previous command&quot;
fc223df6e6f71a506f9bda0fac71b16041fd7004  # Your SHA will differ from this one (why?)
$ ls -l refs
$ ls -l refs/remotes
$ ls -l refs/remotes/origin
$ file refs/remotes/origin/main
$ cat !$
fc223df6e6f71a506f9bda0fac71b16041fd7004
</code></pre>
<p>So, how is HEAD stored in the git repo?  How about local and remote branches?</p>
<h2 id="the-three-git-objects---commit-tree-blob"><a class="header" href="#the-three-git-objects---commit-tree-blob">The Three Git Objects - Commit, Tree, Blob</a></h2>
<p>What kind of SHA is <code>HEAD</code>?</p>
<pre><code>$ git cat-file -t HEAD
commit
</code></pre>
<p>Let's look at the origin/main commit (HEAD was the same as origin/main, until you committed hi.txt).</p>
<pre><code>$ git cat-file -p origin/main
tree 07018552500e8ebd52c2011c51a9b21a01c11ce4
parent b1c24a12c733be55ab2512fc003a84405bf68126
author Chris Walquist &lt;cwalquist@drw.com&gt; 1615843154 -0500
committer Chris Walquist &lt;cwalquist@drw.com&gt; 1615843154 -0500

ignore _site directory
</code></pre>
<p>What kind of SHA is <code>07018</code>?</p>
<pre><code>$ git cat-file -t 07018
tree
</code></pre>
<p>What is in <code>07018</code>?  (Remember, your exact SHA, and its contents, will be different than this example)</p>
<pre><code>$ git cat-file -p 9c94
100644 blob 1377554ebea6f98a2c748183bc5a96852af12ac2	.gitignore
100644 blob 5dbb683a366d3db08fa9adb8389759bc1a7151d1	about.html
040000 tree b926a635d3b58e146cbf9dad4593f75b6568e1c6	bin
100644 blob fa9e798a76c72b95ac7939eca39c432001eb637f	faq.html
100644 blob 21fccfeade64cc2240f5395fa5949d612f5422f8	help.html
040000 tree abd4dc21a6bb32bc275bd095761187852a308393	images
100644 blob 16a46ac3537a1b56fd5dd8380df79463e3cea28a	index.html
100644 blob 9103c17890d85e851d01765890932f9331102ba7	map.html
100644 blob e076b3f199fe75ee38d2e71981e0c266e189fb2b	styles.css
</code></pre>
<p>What SHA contains the contents of the first entry in <code>9c94</code>?  What is that entry's name?</p>
<p>How do you tell whether it's a filename or a directory name?  Hint: What kind of SHA is the first entry?</p>
<pre><code>$ git cat-file -p 2d45b
__pycache__
venv
*.swp
*.pyc
*.sqlite3
_site
</code></pre>
<p>Consider this git object diagram, courtesy of git-scm.com:</p>
<p><img src="https://git-scm.com/book/en/v2/images/data-model-3.png" alt="" title="Git Data Model" /></p>
<p>What SHAs from your repo (whether commit, tree, or blob) would correspond to this diagram's latest commit?</p>
<p>So there they are:  <strong>The Three Objects</strong>.  <strong>commit</strong>, <strong>tree</strong>, and <strong>blob</strong>. Next up: How do they work in practice?</p>
<h2 id="the-three-trees"><a class="header" href="#the-three-trees">The Three Trees</a></h2>
<p>HEAD, Index, and Working Tree</p>
<p>Git manages your local changes using three trees:</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Tree</strong></th><th><strong>Role</strong></th></tr></thead><tbody>
<tr><td>HEAD</td><td>The latest commit</td></tr>
<tr><td>Index</td><td>The commit-in-progress, aka &quot;staging&quot;</td></tr>
<tr><td>Working Tree</td><td>Your local filesystem (except for the .git directory itself</td></tr>
</tbody></table>
</div>
<p>On the 'green path' (that is, no mistakes or side journeys), changes start in the <strong>working tree</strong> and flow to the <strong>index</strong> via <code>git add</code>, and finally into the repo via <code>git commit</code> (i.e., the branch to which <strong>HEAD</strong> points moves to the next commit):</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: right"><em>Tree:</em></th><th><strong>Working Tree</strong></th><th><strong>Index</strong></th><th><strong>HEAD</strong></th></tr></thead><tbody>
<tr><td style="text-align: right"><em>Operation:</em></td><td>1. &lt;make changes&gt;</td><td>2. <code>git add</code> (stage changes)</td><td>3. <code>git commit</code></td></tr>
</tbody></table>
</div>
<p>See also this workflow diagram from git-scm.com.  Notice that a <code>git checkout</code> updates <em>all three trees</em>:</p>
<p><img src="https://git-scm.com/book/en/v2/images/reset-workflow.png" alt="" /></p>
<p>Sometimes it's necessary to move changes the other way.  For instance, you may want to...</p>
<ol>
<li>Add a forgotten file,</li>
<li>Change a commit message, or</li>
<li>Revert a commit.</li>
</ol>
<p><code>git reset</code>: The command that can assist with all this and more.  Why is it called &quot;reset&quot;?  Possibly because it resets trees to a state that already exists in the repo.  Unlike <code>git add</code> and <code>git commit</code>, which push new states INTO the repo, <code>git reset</code> propagates existing state the other way, OUT of the repo to HEAD, the index, and even the working tree.</p>
<div class="table-wrapper"><table><thead><tr><th>Tree</th><th>Role</th><th><code>git reset</code> &quot;hardness&quot;<br>needed to move the tree</th></tr></thead><tbody>
<tr><td>HEAD</td><td>The latest commit</td><td>--soft</td></tr>
<tr><td>Index</td><td>The commit-in-progress</td><td>--mixed (also moves HEAD.) The default.</td></tr>
<tr><td>Working Tree</td><td>Your local filesystem</td><td>--hard (also moves HEAD and Index.)</td></tr>
</tbody></table>
</div>
<p><code>git reset</code> needs to know two things:</p>
<ol>
<li>The &quot;hardness&quot;--that is, how many trees are to be reset, and</li>
<li>Which commit SHA to (re)set the tree(s) to.</li>
</ol>
<p>If you just type &quot;git reset&quot;, the default hardness is &quot;--mixed&quot;, and the default commit SHA is HEAD.</p>
<h2 id="putting-it-together---moving-objects-among-trees"><a class="header" href="#putting-it-together---moving-objects-among-trees">Putting It Together - Moving Objects Among Trees</a></h2>
<p>Let's follow a single file through this workflow, starting with working-tree changes, which will move into the index, and then into a commit.  Then, we'll revert it, tree by tree, all the way back using <code>git reset</code>.</p>
<h3 id="1-move-a-change-forward-through-the-trees"><a class="header" href="#1-move-a-change-forward-through-the-trees">1. Move a change forward through the trees</a></h3>
<p>Make a change (which tree are you working in now, as you run the following commands?) such as adding a menu item link ...</p>
<pre><code>$ code index.html   #  (or whatever file you may have in your working tree)
# Make a minor change to index.html in your editor, and save it. Then...
$ git status  # or use the 'gs' alias
$ git diff    # or use the 'gd' alias
</code></pre>
<p>Add to the index.</p>
<pre><code>$ git add index.html    # or use the 'ga' alias
$ git status
$ git diff
$ git diff --staged   # or use the 'gds' alias
</code></pre>
<p>Which tree (or trees) have the change now?</p>
<p>Commit it...</p>
<pre><code>$ git rev-parse HEAD
$ git commit -m &quot;Added a menu item link to index.html&quot;  # or use the 'gc' alias: gc -m &quot;Added a...&quot;
$ git status
</code></pre>
<p>Now which tree (or trees) have the change?</p>
<h3 id="2-move-the-same-change-backward-through-the-trees"><a class="header" href="#2-move-the-same-change-backward-through-the-trees">2. Move the same change backward through the trees</a></h3>
<p>Recall that besides specifying &quot;hardness&quot;, we need to tell <code>git reset</code> the commit-SHA to align with--that is, which SHA to reset to.</p>
<p>(What is the previous value of HEAD?)</p>
<pre><code>$ git rev-parse HEAD
$ git reset
$ git rev-parse HEAD   # What happened?  Why?
$ git rev-parse HEAD^   # What does the caret (^) mean?*
$ git status
$ git reset --soft &lt;previous-value-of-head&gt;
$ git rev-parse HEAD
$ git status
$ git diff
$ git diff --staged
</code></pre>
<p>* To understand ^, ~, @{push}, and other revision notation, see <a href="https://git-scm.com/docs/revisions">Git Revisions</a>.</p>
<p>What happened?  What is <code>git status</code> telling you, and why?</p>
<p>What happened to the commit that we were on before doing a `git reset```?  How might we get back to it?</p>
<p>Now the branch that HEAD points to has been &quot;reset&quot;, back to where it was before we committed.  Which tree has changed?</p>
<p>Let's change the next tree...</p>
<pre><code>$ git reset   # Same command, but now something  happened.  Why?
$ git status
$ git diff
$ git diff --staged
</code></pre>
<p>What changed this time?</p>
<p>Let's change the third tree...</p>
<pre><code>$ git reset --hard
$ git status
$ git diff
$ git diff --staged
</code></pre>
<p>Test your understanding:</p>
<ul>
<li>What happened to each tree at each step?</li>
<li>How is <code>git reset &lt;paths&gt;</code> the opposite of `git add <paths>```?</li>
<li>When would each variation of <code>git reset</code> come in handy?</li>
</ul>
<h3 id="another-picture-of-how-git-reset---softmixedhard-tothiscommit--works"><a class="header" href="#another-picture-of-how-git-reset---softmixedhard-tothiscommit--works">Another picture of how <code>&quot;git reset --soft/mixed/hard &lt;ToThisCommit&gt;&quot;</code>  works</a></h3>
<style>
  /* For the git-versus-github table */
  td { text-align: center; }
  tr.bb { border-bottom: 2px solid black !important; }
  .bb table { border-collapse:collapse; }
  th { background-color: #b3a497; }
  th.thcolspan { background-color: #d3c4b7; }
</style>
<!-- Github Markdown doesn't do colspan -->
<table class="bb">
<tr><th>"hardness"</th><th class="thcolspan" colspan="3">Trees that are reset &lt;ToThisCommit&gt;</th></tr>
<tr class="bb"><th></th><th>Working Tree</th><th>Index</th><th>HEAD</th></tr>
<tr><td>--soft</td><td>-</td><td>-</td><td>YES</td></tr>
<tr><td>--mixed</td><td>-</td><td>YES</td><td>YES</td></tr>
<tr><td>--hard</td><td>YES</td><td>YES</td><td>YES</td></tr>
</table>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="session1/resolve-merge-conflict.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="session2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="session1/resolve-merge-conflict.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="session2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
